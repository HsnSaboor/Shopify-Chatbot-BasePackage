<!-- Shopify AI Chatbot Iframe Embed Code -->
<!-- Add this HTML where you want the chatbot to appear -->
<div id="shopify-ai-chatbot" style="
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 70px;
  height: 70px;
  z-index: 9999;
  transition: all 0.3s ease;
">
  <iframe 
    src="https://shopify-ai-chatbot-v2.vercel.app/chatbot"
    style="
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 12px;
      background: transparent;
    "
    sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-top-navigation"
    id="chatbot-iframe">
  </iframe>
</div>

<!-- Load the helper script -->
<script src="https://shopify-ai-chatbot-v2.vercel.app/chatbot-embed.js"></script>

<!-- Dynamic iframe URL with Shopify data (use this in Liquid templates) -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const iframe = document.getElementById('chatbot-iframe');
    const shopifyData = {
      // Add your Shopify Liquid variables here
      shopDomain: '{{ shop.domain }}',
      currency: '{{ cart.currency.iso_code }}',
      customerId: '{{ customer.id }}',
      customerEmail: '{{ customer.email }}',
      cartToken: '{{ cart.token }}',
      cartTotal: '{{ cart.total_price }}',
      cartCount: '{{ cart.item_count }}'
    };
    
    const url = new URL(iframe.src);
    url.searchParams.set('shopifyData', JSON.stringify(shopifyData));
    iframe.src = url.toString();
  });
</script>
